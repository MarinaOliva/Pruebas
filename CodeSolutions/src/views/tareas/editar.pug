extends ../layouts/main

block contenido
  h1 Editar Tarea

  form(action=`/tareas/editar/${tarea.id}?_method=PUT` method="POST")
    div.form-group
      label(for="nombre") Nombre de la tarea
      input.form-control(type="text" name="nombre" id="nombre" required value=tarea.nombre)

    div.form-group
      label(for="proyectoId") Proyecto
      select.form-control(name="proyectoId" id="proyectoId" required)
        each proyecto in proyectos
          option(value=proyecto.id selected=(tarea.proyectoId === proyecto.id))= proyecto.nombre

    div.form-group
      label(for="estado") Estado
      select.form-control(name="estado" id="estado" required)
        each estado in estadosValidos
          // No mostrar "Eliminada" en el formulario de ediciÃ³n
          if estado !== 'Eliminada'
            option(value=estado selected=(tarea.estado === estado))= estado

    div.form-group
      label Horas Estimadas
      input.form-control(type="number" name="horasEstimadas" id="horasEstimadas" min="0" value=tarea.horasEstimadas)

    div.form-group
      label Horas Registradas
      input.form-control(type="number" name="horasRegistradas" id="horasRegistradas" min="0" value=tarea.horasRegistradas)

    div.form-group
      label Empleados asignados
      div.empleados-checkboxes
        if empleados && empleados.length > 0
          each empleado in empleados
            label.checkbox-item
              input(
                type="checkbox"
                name="empleadosAsignados"
                value=empleado.id
                checked=(tarea.empleadosAsignados && tarea.empleadosAsignados.includes(empleado.id))
              )
              | #{empleado.nombre} (#{empleado.rol})
        else
          p No hay empleados disponibles

    button.btn.btn-primary(type="submit") Guardar Cambios
    a.btn.btn-secondary(href="/tareas") Cancelar
